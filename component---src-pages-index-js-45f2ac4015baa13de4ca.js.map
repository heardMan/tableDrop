{"version":3,"sources":["webpack:///./src/components/fileDropZone.js","webpack:///./src/pages/index.js","webpack:///./public/icons/cloud_upload-white-24dp.svg"],"names":["TableDrop","useState","data","setData","readCSV","payload","rows","split","cols","parsed","forEach","row","i","obj","col","j","push","console","log","id","onDragOver","e","preventDefault","onDrop","item","dataTransfer","items","kind","type","file","getAsFile","reader","FileReader","onload","event","csvFile","target","result","readAsText","alt","src","fileIcon","map","key","Object","keys","prop","IndexPage","title","module","exports"],"mappings":"kPAuGeA,EAnGG,WAAO,IAAD,EAEIC,mBAAS,IAA1BC,EAFa,KAEPC,EAFO,KA4CdC,EAAU,SAACC,GAEb,IAAIC,EAAOD,EAAQE,MAAM,MACrBC,EAAOF,EAAK,GAAGC,MAAM,KAErBE,EAAS,GAgBb,OAdAH,EAAKI,SAAQ,SAACC,EAAKC,GACf,GAAU,IAANA,EAAJ,CACA,IAAIC,EAAM,GAEVL,EAAKE,SAAQ,SAACI,EAAKC,GAEfF,EAAIC,GAAOH,EAAIJ,MAAM,KAAKQ,MAG9BN,EAAOO,KAAKH,OAGhBI,QAAQC,IAAIT,GAELA,GAGX,OACI,6BAEI,yBACIU,GAAG,eACHC,WArEY,SAAAC,GAAC,OAAIA,EAAEC,kBAsEnBC,OApEQ,SAACF,GAIjBA,EAAEC,iBAEF,IAAME,EAAOH,EAAEI,aAAaC,MAAM,GAElC,GAAIF,IAEAP,QAAQC,IAAI,gBAEM,SAAdM,EAAKG,MAGL,GAAkB,aAAdH,EAAKI,KAAqB,CAC1BX,QAAQC,IAAI,qBACZ,IAAMW,EAAOL,EAAKM,YAEZC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAAC,GACZ,IAAMC,EAAU/B,EAAQ8B,EAAME,OAAOC,QACrC,OAAOlC,EAAQgC,IAEnBJ,EAAOO,WAAWT,OAEG,sEAAdL,EAAKI,KACZX,QAAQC,IAAI,uBAEZD,QAAQC,IAAIM,GACZP,QAAQC,IAAI,wDAuChB,yBAAKqB,IAAI,oBAAoBC,IAAKC,MAClC,wDAGJ,yBAAKtB,GAAG,QACJ,+BACI,+BACKjB,EAAKwC,KAAI,SAAClB,EAAMZ,GAEb,OADAK,QAAQC,IAAIM,GACJ,wBAAImB,IAAK/B,GACZgC,OAAOC,KAAKrB,GAAMkB,KAAI,SAACI,EAAM/B,GAC1B,OAAQ,wBAAI4B,IAAK5B,GAAIS,EAAKsB,gBCxE/CC,UARG,kBAChB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAM,SACX,kBAAC,EAAD,S,mBCbJC,EAAOC,QAAU","file":"component---src-pages-index-js-45f2ac4015baa13de4ca.js","sourcesContent":["import React, { useState } from \"react\";\nimport fileIcon from \"../../public/icons/cloud_upload-white-24dp.svg\"\nimport { func } from \"prop-types\";\n\nconst TableDrop = () => {\n\n    const [data, setData] = useState([]);\n\n    const dragOverHandler = e => e.preventDefault();\n\n    const dropHandler = (e) => {\n\n        //console.log('File dropped');\n        //prevent default drop event behavior\n        e.preventDefault();\n        //access the first item of the list\n        const item = e.dataTransfer.items['0'];\n\n        if (item) {\n\n            console.log(\"item dropped\");\n\n            if (item.kind === 'file') {\n\n                \n                if (item.type === 'text/csv') {\n                    console.log(\"CSV file detected\");\n                    const file = item.getAsFile();\n\n                    const reader = new FileReader();\n                    reader.onload = event => {\n                        const csvFile = readCSV(event.target.result);\n                        return setData(csvFile);\n                    };\n                    reader.readAsText(file);\n\n                } else if (item.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet') {\n                    console.log(\"XLSX file detected\");\n                } else {\n                    console.log(item);\n                    console.log(\"The only file types cureenty supported are:\\n.csv\")\n                }\n\n            } \n        }\n\n    }\n\n    const readCSV = (payload) => {\n\n        let rows = payload.split('\\n');\n        let cols = rows[0].split(',');\n\n        let parsed = [];\n\n        rows.forEach((row, i) => {\n            if (i === 0) return;\n            let obj = {};\n\n            cols.forEach((col, j) => {\n\n                obj[col] = row.split(',')[j];\n            })\n\n            parsed.push(obj);\n        })\n\n        console.log(parsed);\n\n        return parsed;\n    }\n\n    return (\n        <div>\n\n            <div\n                id='fileDropZone'\n                onDragOver={dragOverHandler}\n                onDrop={dropHandler}>\n                <img alt=\"cloud upload icon\" src={fileIcon} />\n                <p>Drop file on this square</p>\n            </div>\n\n            <div id=\"data\">\n                <table>\n                    <tbody>\n                        {data.map((item, i) => {\n                            console.log(item)\n                            return (<tr key={i}>\n                                {Object.keys(item).map((prop, j) => {\n                                    return (<td key={j}>{item[prop]}</td>)\n                                })}\n                            </tr>)\n\n                        })}\n                    </tbody>\n                </table>\n            </div>\n\n        </div>\n    );\n}\n\nexport default TableDrop;","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport \"./index.css\";\n\nimport Layout from \"../components/layout\"\n// import Image from \"../components/image\"\nimport SEO from \"../components/seo\"\n\nimport FileDropZone from \"../components/fileDropZone.js\"\n\nconst IndexPage = () => (\n  <Layout>\n    <SEO title=\"Home\" />\n    <FileDropZone />\n    {/* <Link to=\"/page-2/\">Go to page 2</Link> */}\n  </Layout>\n)\n\nexport default IndexPage\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTkuMzUgMTAuMDRDMTguNjcgNi41OSAxNS42NCA0IDEyIDQgOS4xMSA0IDYuNiA1LjY0IDUuMzUgOC4wNCAyLjM0IDguMzYgMCAxMC45MSAwIDE0YzAgMy4zMSAyLjY5IDYgNiA2aDEzYzIuNzYgMCA1LTIuMjQgNS01IDAtMi42NC0yLjA1LTQuNzgtNC42NS00Ljk2ek0xNCAxM3Y0aC00di00SDdsNS01IDUgNWgtM3oiLz48L3N2Zz4=\""],"sourceRoot":""}